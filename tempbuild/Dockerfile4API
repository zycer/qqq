FROM dockerdist.bdmd.com/python:3.8.5-buster
LABEL description="hospqc v3 api service"

# Install dependencies via apt-get and pip
RUN pip3 install rfc3339
RUN pip3 install pymysql
RUN pip3 install arrow
RUN pip3 install pyyaml
RUN pip3 install redis
RUN pip3 install pymongo
RUN pip3 install sqlalchemy==1.3.22
RUN pip3 install SQLAlchemy-Utils==0.36.6 
RUN pip3 install protobuf==3.13.0
RUN pip3 install grpcio==1.34.0
RUN pip3 install grpcio-tools==1.34.0
RUN pip3 install pika

# Copy DOCKERIMAGE to /DOCKERIMAGE, this is used to avoid docker build cache for the following build commands
# The DOCKERIMAGE file is generated by openlight builder automatically
#ADD DOCKERIMAGE /DOCKERIMAGE
# Copy libraries
COPY dist/* /opt/pythonsetups/
# Run install
RUN pip3 install /opt/pythonsetups/*

# Expose
EXPOSE 6024
# Entrypoint
ENTRYPOINT [ "python3", "-m", "qcaudit" ]

